# Example config for the Typer CLI
# Run with: bayesdream run --config examples/cli_config.yaml

data:
  meta: /path/to/meta.csv
  counts: /path/to/counts.csv
  feature_meta: /path/to/gene_meta.csv

  # Optional per-file pandas.read_csv kwargs
  # meta_read_csv_kwargs: {}
  # counts_read_csv_kwargs: {index_col: 0}
  # feature_meta_read_csv_kwargs: {index_col: 0}

model:
  modality_name: gene
  cis_gene: GFI1B
  output_dir: ./results
  label: demo_run
  random_seed: 2402
  cores: 1
  guide_covariates: [cell_line]

run:
  steps: [technical, cis, trans, report]

technical:
  set_technical_groups: [cell_line]
  fit:
    sum_factor_col: sum_factor
    tolerance: 0
  save: true

cis:
  load_technical:
    enabled: true
    args:
      use_posterior: false
  fit:
    sum_factor_col: sum_factor
    tolerance: 0
    niters: 100000
  save: true

trans:
  load_technical:
    enabled: true
    args:
      use_posterior: false
  load_cis:
    enabled: true
    args:
      use_posterior: false
  fit:
    modality_name: gene
    sum_factor_col: sum_factor_adj
    function_type: additive_hill
    tolerance: 0
  save: true

report:
  # Optional autoloads before summaries
  # load_technical: {enabled: true, args: {use_posterior: false}}
  # load_cis: {enabled: true, args: {use_posterior: false}}
  # load_trans: {enabled: true, args: {use_posterior: false}}

  technical:
    enabled: true
    args:
      modality_name: gene
  cis:
    enabled: true
  trans:
    enabled: true
    args:
      modality_name: gene
      compute_inflection: true
      compute_full_log2fc: true
